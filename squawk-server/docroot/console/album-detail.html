<!DOCTYPE html>
<html ng-app="squawkApi">
  <head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <title>Squawk Media Server</title>
    <link rel="stylesheet" href="console.css"/>

    <script src="/lib/jquery-2.1.0.min.js"></script>

    <!-- begin jsoneditor -->
    <link rel="stylesheet" href="/lib/jsoneditor-2.3.6/jsoneditor-min.css"/>
    <script src="/lib/jsoneditor-2.3.6/jsoneditor-min.js"></script>
    <script type="text/javascript" src="/lib/jsoneditor-2.3.6/lib/jsonlint/jsonlint.js"></script>
    <script type="text/javascript" src="/lib/jsoneditor-2.3.6/lib/ace/ace.js"></script>
    <script type="text/javascript" src="/lib/jsoneditor-2.3.6/lib/ace/mode-json.js"></script>
    <script type="text/javascript" src="/lib/jsoneditor-2.3.6/lib/ace/theme-textmate.js"></script>
    <script type="text/javascript" src="/lib/jsoneditor-2.3.6/lib/ace/theme-jsoneditor.js"></script>
    <!-- end jsoneditor -->

    <script>
    $( document ).ready(function() {
        $('form').on('change input', function(){
            var id = $('#album-id').val();
            if( !id ) {
                id = 1;
            }
            $.getJSON( "/api/album/" + id, function( data ) {
                editor.set( data );
            }) .fail(function() {
                console.log( "error" );
            });
        });
    var container = document.getElementById('jsoneditor');
    var options = {
      modes: ['code', 'view'],
      name: 'Squawk API Console',
      search: true
    };
    var editor = new jsoneditor.JSONEditor(container, options);
        var id = $('#album-id').val();
        if( !id ) {
            id = 1;
        }
        $.getJSON( "/api/album/" + id, function( data ) {
            editor.set( data );
        }) .fail(function() {
            console.log( "error" );
        });
    });
    </script>
  </head>
  <body>
      <header>// <a href="index.html">API</a> / album /
          <form>
          <input id="album-id" type="text" size="4"/>
      </form></header>
      <table>
        <tr><td>/api/album</td><td>get album details.</td></tr>
      </table>
      <div width="500px" height="500px" id="jsoneditor"></div>
  </body>
</html>
